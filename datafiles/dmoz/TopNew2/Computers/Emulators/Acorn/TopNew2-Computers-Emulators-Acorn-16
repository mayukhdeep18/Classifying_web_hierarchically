welcome to gordonj 's bbc in status page . hi , here you will find information about the bbc micro driver i am developing for mess . emulation status click here for a text status report ( last updated 30/08/2001 ) key colour description ! complete ! working , but room for improvement . stuff being worked on right now . < tr > < td bgcolor = " # ff0000 " width = " 50 " > &nbsp ; < /td > < td > < b > not done at all yet , but will be added soon. < /b > < /td > < /tr > stuff i may look at , at some point . these bits are very unlikely to get emulated . please feel free to contact me at gjefferyes @ hotmail.com to find out about the latest mess developments go to http : //mess.emuverse.com progress report 11/11/2004 hi , if you are interested the idea of open source bbc emulator development , then you just found the right place to be. please contact me if you feel you can contribute , here are a few things i would really like to get working in this emulator : the bbc master. bbc b solidisc sideways ram ( 128k top 8 banks , mapped in with the userport as the rom select ) bbc b oversized roms ( a number of companies released 32k 64k and even 128k roms that would get paged into 16k rom sockets ) bbc b opus chanenger ( an external disc drive with up to 512k of ram disc ) bbc b speech hardware cassette loading support bbc master second processor support ( 6502 , z80 and maybe even the 80286 ) . i would like to get a group together to make some of these things happen. if you can help please contact me at gjefferyes @ hotmail.com 30/08/2001 ok... so it has been a very very long time , life has taken over all my coding time..... so the split mode support is still not been fully added , instead i have gone back to really work on the core of the video code , this new video core will be included in the next mess release , but still not yet with split screen support. i have made a status file which should let you know exactly what is working on what is not. you can get it here 14/11/2000 one word... elite i have started adding the split mode timing support and elite is now looking real cool. the code is not finished yet but the timing does work great , i did not have to fudge the timing at all to get the elite screen to work. i think i will try revs next.. hmmm. now what other games used split mode stuff ? ? ? 01/11/2000 i took a bit of a side step in the last week and started looking into something a little different. it all came about from the fact that i had never really understood how shadow video ram was mapped into the memory and how the hardware controlled read and writes to shadow ram or normal ram , and so it was bugging me that i did not know how this stuff worked and had never had a machine with shadow ram to work this stuff out , so there was one way for me to work this one out , and what is more i do n't think i have seen any other bbc emulators that does this bit ( but i could be wrong ) .. what am i going on about ? mess now has bbc b plus support. yes , those strange machines that where just sort of released as a stop gap until the bbc master was release are now emulated in mess. there are two new drivers added : the bbcbp emulates a bbc b + with the normal 64k of memory and a wd1770 disc controller the bbcbp128 emulated a bbc b + with the memory upgrade giving a total of 128k of memory and also has the wd1770 the extra 64k of ram in the bbc b + 128k was just mapped in as 4 banks of sideways ram in bank 0,1,c and d. i guess i should really add some sideways ram to the bbc b driver at some point soon . so anyway... look out for the next mess release and have fun with the shadow and sideways ram . ps. i am going to try to spend a bit more time getting the bbc b drivers a little more complete before i start looking at adding bbc master support . 19/10/2000 well kev has been at it again and now both the 8271 and the wd1770 work in the bbc driver. so now the bbcb driver uses the 8271 and the new clone bbcb1770 uses the wd1770. one other quick point to note is that very basic printer support has just been added to mess so i will soon have a quick look to see if i can get that hooked up and working. ( ok so the mode 7 cursor is still not fixed , but i am working on that area right now. ) 28/09/2000 a big thanks to kev for getting disc drive support working , now i can get all my old software loaded to test out the rest of the emulator. so he has got me back developing the rest of the machine again. right now i am working on the mode 7 teletext support. it is already starting to look very good , but does need a little more work yet to get it complete. here are a few more pictures from the latest driver , this teletext support will be in the next release. kev is now also working on wd1770 disc support so that should be working real soon now too. after i am happy with the teletext support joystick support will be next up . 06/09/2000 quick update just to say : look out for the next mess release as the bbc driver now have 8271 disc support ! ! ! ! ! ( read only ) a big thanks to kev thacker for getting this working . 04/07/2000 i have made up a detailed report of where exactly the bbc driver for mess is at , look at the picture at the bottom of this page to understand the colour information . 25/06/2000 after one very late night of coding ( 3am ) , and some really great help and some very cool code from lee ward , followed by a bit of head scratching when it just did not want to work. we finally got there ! ! and so now the bbc mess driver has working cassette support ! ! ! ! the code is a really messy hack at the moment , but it should be straight forward from here getting it all cleaned up , and with a bit of luck it should be ready for the next beta release . 23/06/2000 well there is lots of fun stuff happening in this driver at the moment,the latest bbc code made it into mess 37 beta4 : o ) but there is still no disc support : o ( but anyway i have changed a few colours on the diagram below. the first change is the video ula going from being worked on ( cyan ) to working but room for improvement ( yellow ) . it is working very well now , just missing a flashing cursor , and may need a little bit of work to interface with the teletext chip when i get that working better. the teletext processor is not really developed yet , there is just a hacked teletext display put in , just to get mode 7 working , it only displays white text at the moment. i have changed the disc drive from red to cyan , as it is now being worked on by kev thacker , so a big thanks goes out to him , also i am having a go at adding a wd1770 emulation as it is already in mess , but neither are working at all yet. : o ( the final strange thing that i am now looking at is cassette emulation ! ! ! ! i really want to get some files into this emulator , and as i am not getting anywhere fast with the disc drive , the tape was the next best thing , and it looks like it may even get added in time for the next beta release. : o ) i think i am going to have to write a program that turns bbc files back into cassette wave files , it is all a little bit mad but i am having lots of fun getting this one working , i will keep you posted on how it is coming along. bye for now , gordonj . 07/06/2000 the 6845 emulator is working so well that i have started adding the last few little bits it was missing , so it now has basic cursor support ( does not flash yet ) but it all slotted in to place very nicely. : o ) still got to add display blanking delay and cursor display delay and also have a look at interlacing ( i need this all working to get mode 7 working correctly ) none of this should be to hard to add and will not slow it down noticeable . 05/06/2000 i have been having some fun with the video emulation code , just to see how well it stands up , and it is looking good . thrust 01/06/2000 the 6845 is now in and working very cleanly , so it is now being shown in yellow on the diagram below , ( there are still a few more things like cursor control that need to be added. ) just doing a bit more work on cleaning up and optimising the video ula and that should be going yellow before to long too. then i will get back to either the teletext or maybe have another look at the disc drive controller . 30/05/2000 mess 0.37beta3 is out and the bbc driver has been switched no , so go try it out. it still has the old video emulation in it , so look out for 0.37beta4 which should have all the new stuff working . 29/05/2000 look out , here is comes........... : o ) the 6845 code is now working well , just a little slow as i have not optimised it at all yet , as a result it will not be in the up-coming release. i got a bit stuck on the 1770 emulator , if anybody has a 1770 upgrade board and lives in the london area or anybody has any information on the extra latch chip please let me know . 12/05/2000 well , i have had a bit of a break from my mess bbc driver over the last couple of months. ( i think i just got a bit bogged down with the 6845 and 8271 drivers and just did not find the time needed to make any progress with them ) . so now the bbc project is not dead just sleeping a little , i hope to get back to it next week , and am looking at adding disc drive support with the already emulated wd179x disc controller , ( this should work like the wd1770 as used in the ddfs bbc systems. ) so stay tuned over the next few weeks to see if anything start to happen again . 15/03/2000 i now have a very complete 6845 emulator working ( outside of mess ) , i just need to clean it up a bit and then plug it into the mess bbc driver . 06/03/2000 you may have noticed that development has slowed a little over the last week or two. well this is where it is at : i am trying to get the video display really accurate ( so that split mode screens and palette switching stuff will work ) . my first video display code did a good fast job of drawing the screens mode 0 to 6 , but was not really a very accurate emulation of the bbc hardware , it was more of a simulation of the video hardware , as are a lot of video hardware drivers in mame ( you always have to draw the line somewhere. ) this means that it would not be at all easy to add the cursor and the split mode code without things getting really messy. so i took a step back and started really looking into the video circuitry of the bbc micro. so i now have a really good understanding of the 6845 crtc and the video ula , so then i start thinking about how to emulate everything. so i start to build a really accurate 6845 emulator with it controlling the position on the emulated screen that the graphics should be draw , that then calls up some video ula emulation to actually put the pixels on the screen , but then i start to think that really the video ula is clocking the 6845 so it should be the video ula that is in control and that it is clocking the 6845. the next realisations was that really you should have the video ula in control calling the 6845 every clock cycle and then you need tv emulation code to take the pulses from the 6845 and the video ula and it should be this that finally makes the picture on the pc screen. by this time i start having brain melt down. so that is where i am right now , i am back to the idea of having the 6845 in control passing its address and screen position on to the video ula emulation , which then passes this on to some code which is effectivity a tv emulator. the code will i hope now be a very accurate emulation of the real bbc micro hardware , but is getting very slow. so i will get it all working some time soon , and then will spend lots of time trying to optimise it all. p.s. anybody out there want to try and add the 8271 disc drive controller emulation ? ? ? ? 21/02/2000 all the modes from 0 to 6 now work really nice. mode 8 also works , as do some really strange effects you can get by sending some silly values to the ula registers. i just included them in the emulator for completeness. there is a small problem with some optimisation code i have added if you select way out of range 6845 register values that can crash the emulator , but i will sort these out very soon. now i will start to work on the teletext mode 7. also i have added a bit at the bottom of this page that lists what is still to be done. 19/02/2000 well i just tracked down the 6522 bug , it was not an interrupt problem but a timer control problem. and i did clean up the interrupt handling a bit while i was at it. so look what works now : o ) 18/02/2000 modes 0,1,2 & 3 now work really well , ( none standard sizes of these modes also work ) , modes 4,5 & 6 ( also mode 8 , 16 colour 10 characters wide ) are next to be added , and should be just a small rewrite of the mode 0,1,2 & 3 code. i think there is now a problem with the user 6522 interrupts. ( doh ) as soon as all the modes start to work i will make a beta release available. after all the modes are working , the disc drive support is next. ( there is also work going on to add cassette support to mess , it works in one or two drivers already , so i may take a look at this soon. ) click back to the mame rom info page
